// Market Mirror - ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
// é–‹ç™ºç”¨ã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥

import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('ðŸŒ± ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ã‚’é–‹å§‹ã—ã¾ã™...');

  // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ï¼ˆé–‹ç™ºç”¨ï¼‰
  await prisma.review.deleteMany();
  await prisma.idea.deleteMany();
  await prisma.persona.deleteMany();

  // ========================================
  // 1. Personaï¼ˆ5äººã®å€‹æ€§è±Šã‹ãªãƒšãƒ«ã‚½ãƒŠï¼‰
  // ========================================
  console.log('ðŸ‘¥ ãƒšãƒ«ã‚½ãƒŠã‚’ä½œæˆä¸­...');

  const personas = await Promise.all([
    // ãƒšãƒ«ã‚½ãƒŠ1: è¾›å£ãªæŠ•è³‡å®¶
    prisma.persona.create({
      data: {
        name: 'é»’å· å‰›å¿—',
        age: 45,
        gender: 'ç”·æ€§',
        occupation: 'ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚­ãƒ£ãƒ”ã‚¿ãƒªã‚¹ãƒˆ',
        annualIncome: 1800,
        personality: 'è¾›å£ã§å†·é™ã€‚ROIã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’æœ€å„ªå…ˆã€‚æ„Ÿæƒ…è«–ã‚’å«Œã„ã€æ•°å­—ã¨ãƒ­ã‚¸ãƒƒã‚¯ã§åˆ¤æ–­ã™ã‚‹ã€‚',
        hobbies: 'ã‚´ãƒ«ãƒ•ã€ãƒ¯ã‚¤ãƒ³ã€çµŒæ¸ˆèªŒã®è³¼èª­',
        challenges: 'æŠ•è³‡å…ˆã®é¸å®šãƒŸã‚¹ã‚’æ¸›ã‚‰ã—ãŸã„ã€‚å¸‚å ´è¦æ¨¡ã®å°ã•ã„ãƒ‹ãƒƒãƒæ¡ˆä»¶ã«ã¯èˆˆå‘³ãŒãªã„ã€‚',
        buyingBehavior: 'é«˜é¡ã§ã‚‚ä¾¡å€¤ãŒã‚ã‚Œã°å³æ±ºã€‚ãŸã ã—å¤±æ•—ã®ãƒªã‚¹ã‚¯ã‚’æ¥µç«¯ã«å«Œã†ã€‚'
      }
    }),

    // ãƒšãƒ«ã‚½ãƒŠ2: å„ªã—ã„ä¸»å©¦
    prisma.persona.create({
      data: {
        name: 'ç”°ä¸­ ç¾Žå’²',
        age: 38,
        gender: 'å¥³æ€§',
        occupation: 'å°‚æ¥­ä¸»å©¦ï¼ˆå…ƒå–¶æ¥­è·ï¼‰',
        annualIncome: 0,
        personality: 'å„ªã—ãå…±æ„ŸåŠ›ãŒé«˜ã„ã€‚å®Ÿç”¨æ€§ã¨å®¶æ—ã®å¹¸ã›ã‚’é‡è¦–ã€‚ç›´æ„Ÿçš„ã«ä½¿ãˆãªã„ã‚‚ã®ã¯å—ã‘å…¥ã‚Œãªã„ã€‚',
        hobbies: 'æ–™ç†ã€å­è‚²ã¦ã€ã‚¹ãƒžãƒ›ã§ã®ãƒ¬ã‚·ãƒ”æ¤œç´¢',
        challenges: 'å­è‚²ã¦ã¨å®¶äº‹ã®ä¸¡ç«‹ã§æ™‚é–“ãŒãªã„ã€‚ç„¡é§„ãªå‡ºè²»ã‚’é¿ã‘ãŸã„ã€‚',
        buyingBehavior: 'å£ã‚³ãƒŸã‚’é‡è¦–ã€‚å®¶æ—ã®å½¹ã«ç«‹ã¤ã‚‚ã®ãªã‚‰è³¼å…¥ã™ã‚‹ãŒã€ä¾¡æ ¼ã«ã¯æ•æ„Ÿã€‚'
      }
    }),

    // ãƒšãƒ«ã‚½ãƒŠ3: æ…Žé‡ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
    prisma.persona.create({
      data: {
        name: 'ä½è—¤ å¥å¤ª',
        age: 29,
        gender: 'ç”·æ€§',
        occupation: 'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',
        annualIncome: 650,
        personality: 'è«–ç†çš„ã§æ…Žé‡ã€‚æŠ€è¡“çš„ãªå®Ÿç¾å¯èƒ½æ€§ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’æœ€å„ªå…ˆã€‚æµè¡Œã«æµã•ã‚Œãªã„ã€‚',
        hobbies: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ã‚¬ã‚¸ã‚§ãƒƒãƒˆåŽé›†ã€æŠ€è¡“æ›¸ã®è³¼èª­',
        challenges: 'åŠ¹çŽ‡åŒ–ãƒ„ãƒ¼ãƒ«ã‚’æŽ¢ã—ã¦ã„ã‚‹ãŒã€å“è³ªã®ä½Žã„ã‚µãƒ¼ãƒ“ã‚¹ã«é¨™ã•ã‚ŒãŸããªã„ã€‚',
        buyingBehavior: 'å¾¹åº•çš„ã«èª¿æŸ»ã—ã¦ã‹ã‚‰è³¼å…¥ã€‚ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãŒãªã„ã¨è©¦ã•ãªã„ã€‚'
      }
    }),

    // ãƒšãƒ«ã‚½ãƒŠ4: è‹¥ã„ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼
    prisma.persona.create({
      data: {
        name: 'æ˜Ÿé‡Ž ã‚ã„',
        age: 23,
        gender: 'å¥³æ€§',
        occupation: 'SNSã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼',
        annualIncome: 420,
        personality: 'ãƒˆãƒ¬ãƒ³ãƒ‰æ„Ÿåº¦ãŒé«˜ãã€SNSæ˜ ãˆã‚’é‡è¦–ã€‚æ–°ã—ã„ã‚‚ã®ãŒå¥½ãã ãŒé£½ãã‚„ã™ã„ã€‚',
        hobbies: 'InstagramæŠ•ç¨¿ã€ã‚«ãƒ•ã‚§å·¡ã‚Šã€ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³',
        challenges: 'ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚’å¢—ã‚„ã—ãŸã„ã€‚ãƒã‚ºã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒã‚¿æŽ¢ã—ã«å›°ã£ã¦ã„ã‚‹ã€‚',
        buyingBehavior: 'è¦‹ãŸç›®ãŒè‰¯ã‘ã‚Œã°è¡å‹•è²·ã„ã€‚è©±é¡Œæ€§ãŒã‚ã‚Œã°å¤šå°‘é«˜ãã¦ã‚‚è³¼å…¥ã™ã‚‹ã€‚'
      }
    }),

    // ãƒšãƒ«ã‚½ãƒŠ5: ä¿å®ˆçš„ãªé«˜é½¢è€…
    prisma.persona.create({
      data: {
        name: 'å±±ç”° ä¸€éƒŽ',
        age: 68,
        gender: 'ç”·æ€§',
        occupation: 'é€€è·è€…ï¼ˆå…ƒå…¬å‹™å“¡ï¼‰',
        annualIncome: 250,
        personality: 'ä¿å®ˆçš„ã§æ…Žé‡ã€‚æ–°ã—ã„æŠ€è¡“ã«ä¸å®‰ã‚’æ„Ÿã˜ã‚‹ãŒã€ä¾¿åˆ©ãªã‚‚ã®ã¯è©¦ã—ãŸã„ã€‚',
        hobbies: 'æ•£æ­©ã€å°†æ£‹ã€å­«ã¨ã®äº¤æµ',
        challenges: 'ã‚¹ãƒžãƒ›ã®æ“ä½œãŒè‹¦æ‰‹ã€‚è©æ¬ºã‚„ãƒˆãƒ©ãƒ–ãƒ«ã‚’é¿ã‘ãŸã„ã€‚',
        buyingBehavior: 'ä¿¡é ¼ã§ãã‚‹ä¼æ¥­ã®ã‚‚ã®ã—ã‹è²·ã‚ãªã„ã€‚ä½¿ã„æ–¹ãŒåˆ†ã‹ã‚‰ãªã„ã¨è«¦ã‚ã‚‹ã€‚'
      }
    })
  ]);

  console.log(`âœ… ${personas.length}äººã®ãƒšãƒ«ã‚½ãƒŠã‚’ä½œæˆã—ã¾ã—ãŸã€‚`);

  // ========================================
  // 2. Ideaï¼ˆã‚µãƒ³ãƒ—ãƒ«ã‚¢ã‚¤ãƒ‡ã‚¢ï¼‰
  // ========================================
  console.log('ðŸ’¡ ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ä½œæˆä¸­...');

  const idea = await prisma.idea.create({
    data: {
      title: 'ã‚¹ãƒžãƒ›ã§æ¸©æ³‰ã®æ··é›‘çŠ¶æ³ãŒã‚ã‹ã‚‹ã‚¢ãƒ—ãƒª',
      description: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å…¨å›½ã®æ¸©æ³‰æ–½è¨­ã®æ··é›‘çŠ¶æ³ã‚’ç¢ºèªã§ãã‚‹ã‚¢ãƒ—ãƒªã€‚AIã‚«ãƒ¡ãƒ©ã§æ··é›‘åº¦ã‚’åˆ¤å®šã—ã€ç©ºã„ã¦ã„ã‚‹æ™‚é–“å¸¯ã‚’äºˆæ¸¬ã€‚äºˆç´„æ©Ÿèƒ½ã‚‚æ­è¼‰ã€‚',
      targetAudience: '30-60ä»£ã®æ¸©æ³‰å¥½ãã€é€±æœ«ã«å®¶æ—ã§æ¸©æ³‰ã«è¡Œãå±¤',
      category: 'BtoC / ãƒ¬ã‚¸ãƒ£ãƒ¼',
      expectedPrice: 300
    }
  });

  console.log(`âœ… ã‚¢ã‚¤ãƒ‡ã‚¢ã€Œ${idea.title}ã€ã‚’ä½œæˆã—ã¾ã—ãŸã€‚`);

  // ========================================
  // 3. Reviewï¼ˆ2äººã®ãƒšãƒ«ã‚½ãƒŠã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
  // ========================================
  console.log('ðŸ“ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆä¸­...');

  const reviews = await Promise.all([
    // é»’å·ã•ã‚“ï¼ˆæŠ•è³‡å®¶ï¼‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
    prisma.review.create({
      data: {
        ideaId: idea.id,
        personaId: personas[0].id,
        score: 2,
        comment: 'å¸‚å ´è¦æ¨¡ãŒå°ã•ã™ãŽã‚‹ã€‚æ¸©æ³‰ã¨ã„ã†é™å®šçš„ãªãƒ‹ãƒƒãƒå¸‚å ´ã§æœˆé¡300å††ã§ã¯åŽç›ŠåŒ–ãŒåŽ³ã—ã„ã€‚AIã‚«ãƒ¡ãƒ©ã®è¨­ç½®ã‚³ã‚¹ãƒˆã‚’èª°ãŒè² æ‹…ã™ã‚‹ã®ã‹ä¸æ˜Žç¢ºã€‚æŠ•è³‡å¯¾åŠ¹æžœãŒè¦‹ãˆãªã„ã€‚',
        willBuy: false,
        improvementSuggestion: 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’æ¸©æ³‰ã ã‘ã§ãªãã€ã‚¸ãƒ ãƒ»ãƒ—ãƒ¼ãƒ«ãƒ»é£²é£Ÿåº—ãªã©æ··é›‘æƒ…å ±ãŒæ¬²ã—ã„æ–½è¨­å…¨èˆ¬ã«æ‹¡å¤§ã™ã¹ãã€‚æœˆé¡ã§ã¯ãªãæ–½è¨­å´ã‹ã‚‰æ‰‹æ•°æ–™ã‚’å–ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›´ã‚’æŽ¨å¥¨ã€‚',
        pricePerception: 'å®‰ã„',
        trustLevel: 2
      }
    }),

    // ç”°ä¸­ã•ã‚“ï¼ˆä¸»å©¦ï¼‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
    prisma.review.create({
      data: {
        ideaId: idea.id,
        personaId: personas[1].id,
        score: 4,
        comment: 'å­é€£ã‚Œã§æ¸©æ³‰ã«è¡Œãã¨ãã€æ··é›‘çŠ¶æ³ãŒäº‹å‰ã«åˆ†ã‹ã‚‹ã®ã¯ã¨ã¦ã‚‚åŠ©ã‹ã‚Šã¾ã™ï¼ãŸã ã€æœˆé¡300å††ã¯å°‘ã—é«˜ã„ã‹ã‚‚ã€‚å¹´ã«æ•°å›žã—ã‹ä½¿ã‚ãªã„ã®ã§ã€ä½¿ã£ãŸæ™‚ã ã‘æ‰•ãˆã‚‹ã¨ã†ã‚Œã—ã„ã§ã™ã€‚',
        willBuy: true,
        improvementSuggestion: 'æœˆé¡åˆ¶ã§ã¯ãªãã€åˆ©ç”¨å›žæ•°ã«å¿œã˜ãŸå¾“é‡èª²é‡‘åˆ¶ã«ã—ã¦ã»ã—ã„ã€‚ã‚ã¨ã€å­ä¾›å‘ã‘ã®è¨­å‚™æƒ…å ±ï¼ˆãŠã‚€ã¤æ›¿ãˆã‚¹ãƒšãƒ¼ã‚¹ã€ã‚­ãƒƒã‚ºã‚¹ãƒšãƒ¼ã‚¹ï¼‰ã‚‚ä¸€ç·’ã«è¦‹ã‚‰ã‚Œã‚‹ã¨æœ€é«˜ã§ã™ã€‚',
        pricePerception: 'é«˜ã„',
        trustLevel: 4
      }
    })
  ]);

  console.log(`âœ… ${reviews.length}ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸã€‚`);

  // ========================================
  // å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  // ========================================
  console.log('\nðŸŽ‰ ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ãŒå®Œäº†ã—ã¾ã—ãŸï¼');
  console.log(`ðŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚µãƒžãƒªãƒ¼:`);
  console.log(`   - ãƒšãƒ«ã‚½ãƒŠ: ${personas.length}äºº`);
  console.log(`   - ã‚¢ã‚¤ãƒ‡ã‚¢: 1ä»¶`);
  console.log(`   - ãƒ¬ãƒ“ãƒ¥ãƒ¼: ${reviews.length}ä»¶`);
}

main()
  .catch((e) => {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:');
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });

