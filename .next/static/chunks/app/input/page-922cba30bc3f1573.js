(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{9074:function(e,t,s){Promise.resolve().then(s.bind(s,3704))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},3704:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265),l=s(9376);function n(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)(""),[n,c]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[d,x]=(0,r.useState)([]),[m,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/simulations/recent");if(!e.ok)return;let t=await e.json();x(t.simulations||[])}catch(e){u("直近のシミュレーション取得に失敗しました")}})()},[]);let h=async s=>{if(s.preventDefault(),o(null),t.length<10){o("商品説明は10文字以上入力してください");return}c(!0);try{let s=await fetch("/api/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:t})}),a=await s.json();if(!s.ok)throw Error(a.error||"シミュレーションに失敗しました");e.push("/result/".concat(a.simulationId))}catch(e){o(e instanceof Error?e.message:"エラーが発生しました"),c(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12 max-w-2xl",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Review Predictor"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"商品説明を入力して、10,000人の顧客がどう評価するかをシミュレーションします"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsxs)("form",{onSubmit:h,children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"商品説明"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 self-center",children:"サンプル:"}),[{label:"高級財布",text:"高級イタリアンレザーを使用した職人手作りの本革財布。10年使える耐久性と、使い込むほど味が出る経年変化が特徴。カード収納12枚、小銭入れ付き。シンプルで飽きのこないデザイン。"},{label:"ワイヤレスイヤホン",text:"最新のノイズキャンセリング技術搭載のワイヤレスイヤホン。バッテリー持続時間30時間。IPX5防水対応でスポーツにも最適。クリアな高音質とパワフルな重低音を実現。"},{label:"オーガニック化粧品",text:"100%天然由来成分のオーガニックスキンケアセット。敏感肌の方にも安心。パラベンフリー、合成香料不使用。植物の力で肌本来の美しさを引き出します。"}].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>s(e.text),disabled:n,className:"px-3 py-1 text-xs bg-gray-100 hover:bg-blue-100 text-gray-700 hover:text-blue-700 rounded-full border border-gray-300 hover:border-blue-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.label},e.label))]}),(0,a.jsx)("textarea",{id:"description",value:t,onChange:e=>s(e.target.value),placeholder:"例: 高級レザーを使用した職人手作りの本革財布。シンプルで飽きのこないデザイン。カード収納8枚、小銭入れ付き。",className:"w-full h-40 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-gray-800",disabled:n}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:[t.length," / 2000文字"]})]}),i&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:i})}),(0,a.jsx)("button",{type:"submit",disabled:n||t.length<10,className:"w-full py-4 px-6 rounded-lg text-white font-semibold text-lg transition-all\n                ".concat(n||t.length<10?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl"),children:n?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"シミュレーション中..."]}):"シミュレーションを実行"})]}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"シミュレーションの仕組み"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-500",children:"1."}),"商品説明をAIがベクトル化"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-500",children:"2."}),"10,000人の仮想顧客との類似度を計算"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-500",children:"3."}),"各顧客の評価（1-5星）を予測"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-500",children:"4."}),"セグメント別の分析結果を表示"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:"直近のシミュレーション"}),m&&(0,a.jsx)("p",{className:"text-xs text-red-500 mb-2",children:m}),0===d.length?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"まだシミュレーション履歴がありません。"}):(0,a.jsx)("ul",{className:"space-y-3",children:d.map(t=>(0,a.jsxs)("li",{className:"flex items-center justify-between px-4 py-3 bg-white/60 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition",onClick:()=>e.push("/result/".concat(t.id)),children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:t.product.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:[new Date(t.createdAt).toLocaleString("ja-JP")," ・"," ",t.product.category]})]}),(0,a.jsxs)("div",{className:"ml-4 text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-700",children:null!==t.avgRating?"".concat(t.avgRating.toFixed(1),"★"):"-"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null!==t.conversionRate?"高評価率 ".concat(t.conversionRate.toFixed(1),"%"):t.status})]})]},t.id))})]}),(0,a.jsx)("p",{className:"text-center text-sm text-gray-500 mt-8",children:"データベース授業 最終課題 - Review Predictor"})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9074)}),_N_E=e.O()}]);