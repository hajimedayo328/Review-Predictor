# Market Mirror - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“è¨­è¨ˆæ›¸

> **ä½œæˆæ—¥**: 2026å¹´1æœˆ13æ—¥  
> **å¯¾è±¡**: Cursor AI / Claude Code  
> **ç›®çš„**: ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ1ã¤ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’ç†è§£ã—å®Ÿè£…ã§ãã‚‹çŠ¶æ…‹ã«ã™ã‚‹

---

## ğŸ“‹ ç›®æ¬¡
1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#2-æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#3-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#4-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
5. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#5-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
6. [ç”»é¢ä»•æ§˜](#6-ç”»é¢ä»•æ§˜)
7. [APIä»•æ§˜](#7-apiä»•æ§˜)
8. [PDCAå®Ÿè¡Œãƒ•ãƒ­ãƒ¼](#8-pdcaå®Ÿè¡Œãƒ•ãƒ­ãƒ¼)
9. [å®Ÿè£…å„ªå…ˆé †ä½](#9-å®Ÿè£…å„ªå…ˆé †ä½)

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å
**Market Mirror** (ãƒãƒ¼ã‚±ãƒƒãƒˆãƒŸãƒ©ãƒ¼)

### 1.2 ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
ãƒ“ã‚¸ãƒã‚¹ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€90äººã®å¤šæ§˜ãªãƒšãƒ«ã‚½ãƒŠãŒè‡ªå‹•ã§PDCAã‚µã‚¤ã‚¯ãƒ«ã‚’å›ã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

### 1.3 ä¸»è¦æ©Ÿèƒ½
- ãƒ“ã‚¸ãƒã‚¹ã‚¢ã‚¤ãƒ‡ã‚¢ã®å…¥åŠ›ï¼ˆPlanï¼‰
- ã‚«ãƒ†ã‚´ãƒªé¸æŠï¼ˆæ—¥æœ¬æ¨™æº– / ãƒ“ã‚¸ãƒã‚¹ç‰¹åŒ– / ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼å…ˆé€²ï¼‰
- PDCAå®Ÿè¡Œå›æ•°ã®é¸æŠï¼ˆ1å› / 3å› / 5å› / 10å›ï¼‰
- é¸æŠã‚«ãƒ†ã‚´ãƒªã®30äººãŒè‡ªå‹•ã§ Do â†’ Check â†’ Act ã‚’å®Ÿè¡Œ
- å„ã‚µã‚¤ã‚¯ãƒ«ã”ã¨ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯çµæœã‚’ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º

### 1.4 ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- èµ·æ¥­å®¶ãƒ»æ–°è¦äº‹æ¥­æ‹…å½“è€…
- å¤§å­¦ç”Ÿï¼ˆèª²é¡Œãƒ»ã‚³ãƒ³ãƒ†ã‚¹ãƒˆå‘ã‘ï¼‰
- ã‚¢ã‚¤ãƒ‡ã‚¢æ¤œè¨¼ã‚’ä½ã‚³ã‚¹ãƒˆã§è¡Œã„ãŸã„äºº

### 1.5 æˆåŠŸæŒ‡æ¨™
- 1æœˆ14æ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã§å‹•ããƒ‡ãƒ¢ã‚’æŠ«éœ²
- ã‚¢ãƒ—ãƒªé–‹ç™ºã‚³ãƒ³ãƒ†ã‚¹ãƒˆã§1ä½ç²å¾—

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 2.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Framework**: Next.js 14.x (App Router)
- **Language**: TypeScript 5.x
- **Styling**: Tailwind CSS 3.x
- **UI Components**: Shadcn UI (optional, å¿…è¦ã«å¿œã˜ã¦)
- **State Management**: React Hooks (useState, useEffect)

### 2.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Runtime**: Node.js 20.x
- **API**: Next.js API Routes
- **ORM**: Prisma 5.x
- **Database**: PostgreSQL 15.x

### 2.3 AI/ML
- **Provider**: Anthropic Claude API
- **Model**: claude-sonnet-4-20250514
- **Purpose**: ãƒšãƒ«ã‚½ãƒŠã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆ

### 2.4 é–‹ç™ºãƒ„ãƒ¼ãƒ«
- **IDE**: Cursor (AIè£œåŠ©ä»˜ãVSCode)
- **CLI Tool**: Claude Code (ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã®è‡ªå‹•ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°)
- **Package Manager**: npm (æ¨å¥¨) or pnpm

### 2.5 ç’°å¢ƒå¤‰æ•°
```env
DATABASE_URL="postgresql://user:password@localhost:5432/market_mirror"
ANTHROPIC_API_KEY="sk-ant-..."
```

---

## 3. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 3.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Browser (Client)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Input   â”‚  â”‚ Execute  â”‚  â”‚  Report [1] [2] [3]  â”‚  â”‚
â”‚  â”‚  Page    â”‚â†’ â”‚  Page    â”‚â†’ â”‚  Page                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ HTTP Request
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Next.js Server (API Routes)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  POST /api/pdca/execute                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ 1. ã‚«ãƒ†ã‚´ãƒªã®30äººå–å¾—                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ 2. å„ãƒšãƒ«ã‚½ãƒŠã« Claude API å‘¼ã³å‡ºã— (D,C,A)  â”‚   â”‚
â”‚  â”‚  â”œâ”€ 3. çµæœã‚’Prismaã§DBä¿å­˜                      â”‚   â”‚
â”‚  â”‚  â””â”€ 4. æŒ‡å®šå›æ•°åˆ†ãƒ«ãƒ¼ãƒ—                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/ideas/[ideaId]                         â”‚   â”‚
â”‚  â”‚  â””â”€ ã‚¢ã‚¤ãƒ‡ã‚¢ã¨å…¨ã‚µã‚¤ã‚¯ãƒ«ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å–å¾—      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PostgreSQL Database                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Persona â”‚  â”‚ PDCACycle â”‚  â”‚ Feedback â”‚              â”‚
â”‚  â”‚ (90äºº)  â”‚  â”‚ (å„å›)    â”‚  â”‚ (D,C,A)  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Anthropic Claude API                       â”‚
â”‚  Model: claude-sonnet-4-20250514                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›]
  ã‚¢ã‚¤ãƒ‡ã‚¢: "å¤§å­¦ç”Ÿå‘ã‘AIå­¦ç¿’ã‚¢ãƒ—ãƒª"
  ã‚«ãƒ†ã‚´ãƒª: æ—¥æœ¬æ¨™æº–
  å›æ•°: 3å›
       â†“
[API: POST /api/pdca/execute]
  1. Idea ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ (status: RUNNING)
  2. ã‚«ãƒ†ã‚´ãƒªã€Œæ—¥æœ¬æ¨™æº–ã€ã®30äººå–å¾—
       â†“
[PDCAå®Ÿè¡Œãƒ«ãƒ¼ãƒ—: 3å›]
  â”Œâ”€ 1å›ç›® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ - PDCACycle(cycleNumber: 1) ä½œæˆ â”‚
  â”‚ - 30äººä¸¦åˆ—ã§Claude APIå‘¼ã³å‡ºã—   â”‚
  â”‚   Persona 1: D,C,Aç”Ÿæˆ           â”‚
  â”‚   Persona 2: D,C,Aç”Ÿæˆ           â”‚
  â”‚   ...                            â”‚
  â”‚   Persona 30: D,C,Aç”Ÿæˆ          â”‚
  â”‚ - 30ä»¶ã®Feedbackãƒ¬ã‚³ãƒ¼ãƒ‰ä¿å­˜     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€ 2å›ç›® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ - PDCACycle(cycleNumber: 2) ä½œæˆ â”‚
  â”‚ - å‰å›ã®çµæœã‚’è¸ã¾ãˆã¦Claudeå‘¼å‡º â”‚
  â”‚ - 30ä»¶ã®Feedbackãƒ¬ã‚³ãƒ¼ãƒ‰ä¿å­˜     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€ 3å›ç›® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ - PDCACycle(cycleNumber: 3) ä½œæˆ â”‚
  â”‚ - å‰å›ã®çµæœã‚’è¸ã¾ãˆã¦Claudeå‘¼å‡º â”‚
  â”‚ - 30ä»¶ã®Feedbackãƒ¬ã‚³ãƒ¼ãƒ‰ä¿å­˜     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
[å®Œäº†å‡¦ç†]
  - Idea.status = COMPLETED ã«æ›´æ–°
  - ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
       â†“
[ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º]
  - GET /api/ideas/[ideaId]
  - å„ã‚µã‚¤ã‚¯ãƒ«ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å–å¾—
  - [1å›ç›®] [2å›ç›®] [3å›ç›®] ã‚¿ãƒ–ã§åˆ‡ã‚Šæ›¿ãˆ
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 4.1 ERå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Persona     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)         â”‚â”€â”€â”
â”‚ name            â”‚  â”‚
â”‚ category (Enum) â”‚  â”‚
â”‚ age             â”‚  â”‚
â”‚ occupation      â”‚  â”‚
â”‚ background      â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚      Idea       â”‚  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
â”‚ id (PK)         â”‚â”€â”€â”
â”‚ content         â”‚  â”‚
â”‚ category (Enum) â”‚  â”‚
â”‚ cycleCount      â”‚  â”‚
â”‚ status (Enum)   â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚           â”‚
         â”‚ 1:N       â”‚
         â†“           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   PDCACycle     â”‚  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
â”‚ id (PK)         â”‚â”€â”€â”
â”‚ ideaId (FK)     â”‚  â”‚
â”‚ cycleNumber     â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚           â”‚
         â”‚ 1:N       â”‚
         â†“           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    Feedback     â”‚  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
â”‚ id (PK)         â”‚  â”‚
â”‚ cycleId (FK)    â”‚â†â”€â”˜
â”‚ personaId (FK)  â”‚â†â”€â”€â”˜
â”‚ doResponse      â”‚
â”‚ checkResponse   â”‚
â”‚ actResponse     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Prisma Schema (å®Œå…¨ç‰ˆ)
```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ========================================
// ãƒšãƒ«ã‚½ãƒŠãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆ90äººå›ºå®šï¼‰
// ========================================
model Persona {
  id          String   @id @default(cuid())
  name        String   // ä¾‹: ä½è—¤å¤ªéƒ
  category    Category
  age         Int
  occupation  String   // ä¾‹: ä¼šç¤¾å“¡ï¼ˆå–¶æ¥­ï¼‰
  background  String   @db.Text // è©³ç´°ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  
  feedbacks   Feedback[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([category])
}

// ========================================
// 3ã¤ã®ã‚«ãƒ†ã‚´ãƒªå®šç¾©
// ========================================
enum Category {
  JAPAN_STANDARD    // æ—¥æœ¬æ¨™æº–ï¼ˆä¸€èˆ¬çš„ãªæ—¥æœ¬äºº30äººï¼‰
  BUSINESS_FOCUSED  // ãƒ“ã‚¸ãƒã‚¹ç‰¹åŒ–ï¼ˆçµŒå–¶è€…ãƒ»æŠ•è³‡å®¶30äººï¼‰
  TECH_ADVANCED     // ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼å…ˆé€²ï¼ˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»ç ”ç©¶è€…30äººï¼‰
}

// ========================================
// ãƒ“ã‚¸ãƒã‚¹ã‚¢ã‚¤ãƒ‡ã‚¢
// ========================================
model Idea {
  id          String     @id @default(cuid())
  content     String     @db.Text  // Plan: ã‚¢ã‚¤ãƒ‡ã‚¢æœ¬æ–‡
  category    Category              // é¸æŠã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒª
  cycleCount  Int                   // PDCAå®Ÿè¡Œå›æ•°ï¼ˆ1/3/5/10ï¼‰
  status      IdeaStatus @default(PENDING)
  
  cycles      PDCACycle[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

enum IdeaStatus {
  PENDING    // æœªå®Ÿè¡Œ
  RUNNING    // å®Ÿè¡Œä¸­
  COMPLETED  // å®Œäº†
  FAILED     // å¤±æ•—
}

// ========================================
// PDCAã‚µã‚¤ã‚¯ãƒ«ï¼ˆ1å›ç›®ã€2å›ç›®...ï¼‰
// ========================================
model PDCACycle {
  id          String   @id @default(cuid())
  ideaId      String
  idea        Idea     @relation(fields: [ideaId], references: [id], onDelete: Cascade)
  
  cycleNumber Int      // ä½•å›ç›®ï¼ˆ1, 2, 3, ...ï¼‰
  
  feedbacks   Feedback[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@unique([ideaId, cycleNumber])
  @@index([ideaId])
}

// ========================================
// å„ãƒšãƒ«ã‚½ãƒŠã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆD, C, Aï¼‰
// ========================================
model Feedback {
  id          String    @id @default(cuid())
  cycleId     String
  cycle       PDCACycle @relation(fields: [cycleId], references: [id], onDelete: Cascade)
  
  personaId   String
  persona     Persona   @relation(fields: [personaId], references: [id])
  
  doResponse    String  @db.Text  // D: å®Ÿéš›ã«è©¦ã™ãªã‚‰ä½•ã‚’ã™ã‚‹ï¼Ÿ
  checkResponse String  @db.Text  // C: Doã«å¯¾ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  actResponse   String  @db.Text  // A: æ”¹å–„æ¡ˆã®ææ¡ˆ
  
  createdAt   DateTime @default(now())
  
  @@unique([cycleId, personaId])
  @@index([cycleId])
}
```

### 4.3 ãƒ‡ãƒ¼ã‚¿ä¾‹
```typescript
// Personaãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ90ä»¶å›ºå®šï¼‰
{
  id: "cm1abc123",
  name: "ä½è—¤å¤ªéƒ",
  category: "JAPAN_STANDARD",
  age: 35,
  occupation: "ä¼šç¤¾å“¡ï¼ˆå–¶æ¥­ï¼‰",
  background: "æ±äº¬éƒ½åœ¨ä½ã€‚å¦»ã¨å­ä¾›2äººã®4äººå®¶æ—ã€‚å¹´å600ä¸‡å††ã€‚..."
}

// Ideaãƒ†ãƒ¼ãƒ–ãƒ«
{
  id: "cm1xyz789",
  content: "å¤§å­¦ç”Ÿå‘ã‘AIå­¦ç¿’ã‚¢ãƒ—ãƒªã€‚ChatGPTã¨é€£æºã—ã¦...",
  category: "JAPAN_STANDARD",
  cycleCount: 3,
  status: "COMPLETED"
}

// PDCACycleãƒ†ãƒ¼ãƒ–ãƒ«
{
  id: "cm1cycle1",
  ideaId: "cm1xyz789",
  cycleNumber: 1
}

// Feedbackãƒ†ãƒ¼ãƒ–ãƒ«
{
  id: "cm1fb001",
  cycleId: "cm1cycle1",
  personaId: "cm1abc123",
  doResponse: "ã¾ãšç„¡æ–™ç‰ˆã‚’å‹äºº10äººã«è©¦ã—ã¦ã‚‚ã‚‰ã„ã¾ã™",
  checkResponse: "UIãŒè¤‡é›‘ã§åˆå¿ƒè€…ã«ã¯é›£ã—ã„å°è±¡ã‚’å—ã‘ã¾ã—ãŸ",
  actResponse: "ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å‹•ç”»ã‚’5åˆ†ä»¥å†…ã§ä½œæˆã™ã¹ãã§ã™"
}
```

---

## 5. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### 5.1 å®Œå…¨ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ„ãƒªãƒ¼
```
market-mirror/
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ seed.ts                 # 90äººã®ãƒšãƒ«ã‚½ãƒŠã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
â”‚
â”œâ”€â”€ public/                     # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ logo.png
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ page.tsx            # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ/input ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ input/               # å…¥åŠ›ç”»é¢
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ execute/             # å®Ÿè¡Œä¸­ç”»é¢ï¼ˆé€²æ—è¡¨ç¤ºï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ report/              # ãƒ¬ãƒãƒ¼ãƒˆç”»é¢
â”‚   â”‚   â”‚   â””â”€â”€ [ideaId]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ api/                 # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ pdca/
â”‚   â”‚       â”‚   â””â”€â”€ execute/
â”‚   â”‚       â”‚       â””â”€â”€ route.ts  # POST: PDCAå®Ÿè¡Œ
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ ideas/
â”‚   â”‚           â””â”€â”€ [ideaId]/
â”‚   â”‚               â””â”€â”€ route.ts  # GET: ã‚¢ã‚¤ãƒ‡ã‚¢+ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å–å¾—
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                # Feature-basedæ§‹æˆ
â”‚   â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IdeaInputForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useCreateIdea.ts
â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚       â””â”€â”€ input.types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pdca-execution/
â”‚   â”‚   â”‚   â”œâ”€â”€ engine/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ executePDCACycle.ts    # ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ claudeClient.ts        # Claude APIå‘¼ã³å‡ºã—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ orchestrator.ts        # 30äººä¸¦åˆ—å®Ÿè¡Œåˆ¶å¾¡
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProgressIndicator.tsx  # é€²æ—è¡¨ç¤ºUI
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ usePDCAProgress.ts
â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚       â””â”€â”€ pdca.types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ report/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportHeader.tsx       # ã‚¢ã‚¤ãƒ‡ã‚¢æƒ…å ±è¡¨ç¤º
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CycleTab.tsx           # [1å›ç›®][2å›ç›®]ã‚¿ãƒ–
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FeedbackCard.tsx       # ãƒšãƒ«ã‚½ãƒŠ1äººåˆ†ã®ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FeedbackList.tsx       # 30äººåˆ†ã®ãƒªã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useIdeaReport.ts
â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚       â””â”€â”€ report.types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ persona/
â”‚   â”‚       â”œâ”€â”€ data/
â”‚   â”‚       â”‚   â””â”€â”€ personaSeeds.ts        # 90äººã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚       â””â”€â”€ types/
â”‚   â”‚           â””â”€â”€ persona.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ui/                  # Shadcn UIå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ button.tsx
â”‚   â”‚       â”œâ”€â”€ card.tsx
â”‚   â”‚       â”œâ”€â”€ input.tsx
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ prisma.ts            # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ï¼‰
â”‚   â”‚   â”œâ”€â”€ utils.ts             # æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆcnç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ constants.ts         # å®šæ•°å®šç¾©
â”‚   â”‚
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ global.d.ts          # ã‚°ãƒ­ãƒ¼ãƒãƒ«å‹å®šç¾©
â”‚
â”œâ”€â”€ .env                         # ç’°å¢ƒå¤‰æ•°ï¼ˆgitignoreï¼‰
â”œâ”€â”€ .env.example                 # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ postcss.config.js
â””â”€â”€ README.md
```

### 5.2 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­è¨ˆã®åŸå‰‡
1. **App Routerã¯è–„ãä¿ã¤**: ãƒ­ã‚¸ãƒƒã‚¯ã¯å…¨ã¦`features/`ã«é…ç½®
2. **Feature-basedæ§‹æˆ**: æŠ€è¡“ã§ã¯ãªãæ©Ÿèƒ½ã§åˆ†å‰²
3. **Colocation**: é–¢é€£ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«
4. **æ˜ç¤ºçš„ãªå‘½å**: `index.tsx`ã‚’é¿ã‘ã€ãƒ•ã‚¡ã‚¤ãƒ«åã§å†…å®¹ã‚’è¡¨ç¾

---

## 6. ç”»é¢ä»•æ§˜

### 6.1 å…¥åŠ›ç”»é¢ (`/input`)

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Market Mirror - ã‚¢ã‚¤ãƒ‡ã‚¢å…¥åŠ›                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  ãƒ“ã‚¸ãƒã‚¹ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                          â”‚ â”‚
â”‚  â”‚  [ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢: 5è¡Œ]                    â”‚ â”‚
â”‚  â”‚  ä¾‹: å¤§å­¦ç”Ÿå‘ã‘AIå­¦ç¿’ã‚¢ãƒ—ãƒªã€‚ChatGPTã¨... â”‚ â”‚
â”‚  â”‚                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                â”‚
â”‚  ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ                 â”‚
â”‚  âšª æ—¥æœ¬æ¨™æº–ï¼ˆä¸€èˆ¬çš„ãªæ—¥æœ¬äººã®è¦–ç‚¹ï¼‰           â”‚
â”‚  âšª ãƒ“ã‚¸ãƒã‚¹ç‰¹åŒ–ï¼ˆçµŒå–¶è€…ãƒ»æŠ•è³‡å®¶ã®è¦–ç‚¹ï¼‰       â”‚
â”‚  âšª ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼å…ˆé€²ï¼ˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»ç ”ç©¶è€…ï¼‰     â”‚
â”‚                                                â”‚
â”‚  PDCAå®Ÿè¡Œå›æ•°                                  â”‚
â”‚  [1å›] [3å›] [5å›] [10å›]  â† ãƒœã‚¿ãƒ³é¸æŠ       â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PDCAã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆ30äººãŒåˆ†æé–‹å§‹ï¼‰         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ©Ÿèƒ½è¦ä»¶
- ã‚¢ã‚¤ãƒ‡ã‚¢ã®æ–‡å­—æ•°åˆ¶é™: 10æ–‡å­—ä»¥ä¸Šã€2000æ–‡å­—ä»¥ä¸‹
- ã‚«ãƒ†ã‚´ãƒªã¯å¿…é ˆé¸æŠï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: æ—¥æœ¬æ¨™æº–ï¼‰
- PDCAå›æ•°ã¯å¿…é ˆé¸æŠï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3å›ï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³: ç©ºæ¬„ãƒã‚§ãƒƒã‚¯
- é€ä¿¡å¾Œã€`/execute?ideaId=[ç”Ÿæˆã•ã‚ŒãŸID]`ã¸é·ç§»

#### APIå‘¼ã³å‡ºã—
```typescript
POST /api/pdca/execute
Body: {
  content: string;
  category: 'JAPAN_STANDARD' | 'BUSINESS_FOCUSED' | 'TECH_ADVANCED';
  cycleCount: 1 | 3 | 5 | 10;
}
Response: {
  ideaId: string;
  message: "PDCAå®Ÿè¡Œã‚’é–‹å§‹ã—ã¾ã—ãŸ";
}
```

---

### 6.2 å®Ÿè¡Œä¸­ç”»é¢ (`/execute`)

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Market Mirror - PDCAå®Ÿè¡Œä¸­                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  ã‚¢ã‚¤ãƒ‡ã‚¢: å¤§å­¦ç”Ÿå‘ã‘AIå­¦ç¿’ã‚¢ãƒ—ãƒª               â”‚
â”‚  ã‚«ãƒ†ã‚´ãƒª: æ—¥æœ¬æ¨™æº–                             â”‚
â”‚  å®Ÿè¡Œå›æ•°: 3å›                                  â”‚
â”‚                                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”     â”‚
â”‚  å…¨ä½“é€²æ—: 1å›ç›® / 3å›                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”     â”‚
â”‚                                                â”‚
â”‚  âœ… 1å›ç›®å®Œäº†ï¼ˆ30äººã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å–å¾—æ¸ˆã¿ï¼‰    â”‚
â”‚  ğŸ”„ 2å›ç›®å®Ÿè¡Œä¸­...                              â”‚
â”‚     â”œâ”€ âœ… ãƒšãƒ«ã‚½ãƒŠ 1-10 å®Œäº†                    â”‚
â”‚     â”œâ”€ ğŸ”„ ãƒšãƒ«ã‚½ãƒŠ 11-20 å®Ÿè¡Œä¸­                 â”‚
â”‚     â””â”€ â³ ãƒšãƒ«ã‚½ãƒŠ 21-30 å¾…æ©Ÿä¸­                 â”‚
â”‚  â³ 3å›ç›®å¾…æ©Ÿä¸­                                 â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ãƒ¬ãƒãƒ¼ãƒˆã‚’è¦‹ã‚‹ï¼ˆå®Œäº†å¾Œã«æœ‰åŠ¹ï¼‰            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ©Ÿèƒ½è¦ä»¶
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤ºï¼ˆãƒãƒ¼ãƒªãƒ³ã‚° or Server-Sent Eventsï¼‰
- å„ã‚µã‚¤ã‚¯ãƒ«ã®å®Œäº†çŠ¶æ³ã‚’è¦–è¦šåŒ–
- å…¨ã‚µã‚¤ã‚¯ãƒ«å®Œäº†å¾Œã€ã€Œãƒ¬ãƒãƒ¼ãƒˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
- ã‚¯ãƒªãƒƒã‚¯ã§`/report/[ideaId]`ã¸é·ç§»

#### æŠ€è¡“å®Ÿè£…æ¡ˆ
```typescript
// ãƒãƒ¼ãƒªãƒ³ã‚°æ–¹å¼ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰
useEffect(() => {
  const interval = setInterval(async () => {
    const res = await fetch(`/api/ideas/${ideaId}`);
    const data = await res.json();
    if (data.status === 'COMPLETED') {
      clearInterval(interval);
      setCompleted(true);
    }
  }, 2000); // 2ç§’ã”ã¨ã«ãƒã‚§ãƒƒã‚¯
}, [ideaId]);
```

---

### 6.3 ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ (`/report/[ideaId]`)

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Market Mirror - PDCAçµæœãƒ¬ãƒãƒ¼ãƒˆ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã‚¢ã‚¤ãƒ‡ã‚¢: å¤§å­¦ç”Ÿå‘ã‘AIå­¦ç¿’ã‚¢ãƒ—ãƒª                           â”‚
â”‚  ã‚«ãƒ†ã‚´ãƒª: æ—¥æœ¬æ¨™æº–                                         â”‚
â”‚  å®Ÿè¡Œå›æ•°: 3å›                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [1å›ç›®] [2å›ç›®] [3å›ç›®]  â† ã‚¯ãƒªãƒƒã‚¯ã§ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  === 1å›ç›®ã®PDCAçµæœ ===                                   â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ ãƒšãƒ«ã‚½ãƒŠ 1/30                                    â”‚   â”‚
â”‚  â”‚ ä½è—¤å¤ªéƒï¼ˆ35æ­³ãƒ»ä¼šç¤¾å“¡ï¼‰                            â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚ D: ã¾ãšç„¡æ–™ç‰ˆã‚’å‹äºº10äººã«è©¦ã—ã¦ã‚‚ã‚‰ã„ã¾ã™          â”‚   â”‚
â”‚  â”‚ C: UIãŒè¤‡é›‘ã§åˆå¿ƒè€…ã«ã¯é›£ã—ã„å°è±¡ã‚’å—ã‘ã¾ã—ãŸ       â”‚   â”‚
â”‚  â”‚ A: ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å‹•ç”»ã‚’5åˆ†ä»¥å†…ã§ä½œæˆã™ã¹ãã§ã™     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ ãƒšãƒ«ã‚½ãƒŠ 2/30                                    â”‚   â”‚
â”‚  â”‚ ç”°ä¸­èŠ±å­ï¼ˆ52æ­³ãƒ»ãƒ‘ãƒ¼ãƒˆä¸»å©¦ï¼‰                        â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚ D: æ¯å­ã«å‹§ã‚ã¦1é€±é–“ä½¿ã‚ã›ã¦ã¿ã¾ã™                 â”‚   â”‚
â”‚  â”‚ C: æœˆé¡3000å††ã¯é«˜ã™ãã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸ                â”‚   â”‚
â”‚  â”‚ A: å­¦ç”Ÿå‘ã‘å‰²å¼•ãƒ—ãƒ©ãƒ³ï¼ˆæœˆ1000å††ï¼‰ã®å°å…¥ã‚’æ¤œè¨      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”‚  ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§30äººåˆ†è¡¨ç¤ºï¼‰                                â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ©Ÿèƒ½è¦ä»¶
- ã‚¿ãƒ–ã‚¯ãƒªãƒƒã‚¯ã§å„ã‚µã‚¤ã‚¯ãƒ«ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åˆ‡ã‚Šæ›¿ãˆ
- 30äººå…¨å“¡ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤º
- ãƒšãƒ«ã‚½ãƒŠæƒ…å ±ï¼ˆåå‰ãƒ»å¹´é½¢ãƒ»è·æ¥­ï¼‰ã‚’æ˜ç¤º
- Dï¼ˆDoï¼‰ã€Cï¼ˆCheckï¼‰ã€Aï¼ˆActï¼‰ã‚’è‰²åˆ†ã‘è¡¨ç¤º
  - D: ç·‘è‰²
  - C: é»„è‰²
  - A: é’è‰²

#### ãƒ‡ãƒ¼ã‚¿å–å¾—
```typescript
GET /api/ideas/[ideaId]
Response: {
  idea: {
    id: string;
    content: string;
    category: Category;
    cycleCount: number;
  };
  cycles: [
    {
      cycleNumber: 1,
      feedbacks: [
        {
          persona: { name, age, occupation },
          doResponse: string,
          checkResponse: string,
          actResponse: string
        },
        // ... 29äººåˆ†
      ]
    },
    // ... å„ã‚µã‚¤ã‚¯ãƒ«
  ]
}
```

---

## 7. APIä»•æ§˜

### 7.1 PDCAå®Ÿè¡ŒAPI

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
POST /api/pdca/execute
```

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```typescript
{
  content: string;      // ã‚¢ã‚¤ãƒ‡ã‚¢æœ¬æ–‡ï¼ˆ10-2000æ–‡å­—ï¼‰
  category: 'JAPAN_STANDARD' | 'BUSINESS_FOCUSED' | 'TECH_ADVANCED';
  cycleCount: 1 | 3 | 5 | 10;
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰
```typescript
{
  ideaId: string;
  message: "PDCAå®Ÿè¡Œã‚’é–‹å§‹ã—ã¾ã—ãŸ";
}
```

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼
```typescript
1. Ideaãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆï¼ˆstatus: RUNNINGï¼‰
2. é¸æŠã‚«ãƒ†ã‚´ãƒªã®30äººã®ãƒšãƒ«ã‚½ãƒŠã‚’å–å¾—
3. for (let i = 1; i <= cycleCount; i++) {
     - PDCACycleãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
     - 30äººä¸¦åˆ—ã§Claude APIå‘¼ã³å‡ºã—
       - å„ãƒšãƒ«ã‚½ãƒŠã«ã€ŒDã€ã€ŒCã€ã€ŒAã€ã‚’ç”Ÿæˆã•ã›ã‚‹
     - 30ä»¶ã®Feedbackãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€æ‹¬ä¿å­˜
   }
4. Idea.status = COMPLETED ã«æ›´æ–°
5. ideaIdã‚’è¿”å´
```

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
400 Bad Request: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
500 Internal Server Error: DBæ¥ç¶šã‚¨ãƒ©ãƒ¼ã€Claude APIã‚¨ãƒ©ãƒ¼
```

---

### 7.2 ã‚¢ã‚¤ãƒ‡ã‚¢å–å¾—API

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
GET /api/ideas/[ideaId]
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
{
  idea: {
    id: string;
    content: string;
    category: Category;
    cycleCount: number;
    status: IdeaStatus;
    createdAt: string;
  };
  cycles: Array<{
    cycleNumber: number;
    createdAt: string;
    feedbacks: Array<{
      id: string;
      persona: {
        name: string;
        age: number;
        occupation: string;
        background: string;
      };
      doResponse: string;
      checkResponse: string;
      actResponse: string;
    }>;
  }>;
}
```

#### Prismaã‚¯ã‚¨ãƒªä¾‹
```typescript
const data = await prisma.idea.findUnique({
  where: { id: ideaId },
  include: {
    cycles: {
      orderBy: { cycleNumber: 'asc' },
      include: {
        feedbacks: {
          include: {
            persona: true
          }
        }
      }
    }
  }
});
```

---

## 8. PDCAå®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### 8.1 Claude APIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

#### 1å›ç›®ã®ã‚µã‚¤ã‚¯ãƒ«ï¼ˆåˆå›ï¼‰
```typescript
const prompt = `
ã‚ãªãŸã¯${persona.name}ï¼ˆ${persona.age}æ­³ãƒ»${persona.occupation}ï¼‰ã§ã™ã€‚

ã€ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€‘
${persona.background}

ã€ãƒ“ã‚¸ãƒã‚¹ã‚¢ã‚¤ãƒ‡ã‚¢ï¼ˆPlanï¼‰ã€‘
${idea.content}

ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®3ã¤ã®è¦³ç‚¹ã§å…·ä½“çš„ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

1. Doï¼ˆå®Ÿè¡Œï¼‰: ã‚ãªãŸãŒã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å®Ÿéš›ã«è©¦ã™ã¨ã—ãŸã‚‰ã€å…·ä½“çš„ã«ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿï¼ˆ100-200æ–‡å­—ï¼‰

2. Checkï¼ˆè©•ä¾¡ï¼‰: ä¸Šè¨˜ã®Doã‚’å®Ÿè¡Œã—ãŸçµæœã€ã©ã‚“ãªå•é¡Œã‚„èª²é¡ŒãŒè¦‹ãˆã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿï¼ˆ100-200æ–‡å­—ï¼‰

3. Actï¼ˆæ”¹å–„ï¼‰: Checkã§è¦‹ãˆãŸå•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®å…·ä½“çš„ãªæ”¹å–„æ¡ˆã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚ï¼ˆ100-200æ–‡å­—ï¼‰

ä»¥ä¸‹ã®JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
{
  "do": "...",
  "check": "...",
  "act": "..."
}
`;
```

#### 2å›ç›®ä»¥é™ã®ã‚µã‚¤ã‚¯ãƒ«ï¼ˆå‰å›ã®çµæœã‚’å‚ç…§ï¼‰
```typescript
const previousFeedbacks = // å‰å›ã®ã‚µã‚¤ã‚¯ãƒ«ã§å…¨30äººãŒå‡ºã—ãŸActã‚’ã¾ã¨ã‚ãŸã‚‚ã®

const prompt = `
ã‚ãªãŸã¯${persona.name}ï¼ˆ${persona.age}æ­³ãƒ»${persona.occupation}ï¼‰ã§ã™ã€‚

ã€åˆå›ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã€‘
${idea.content}

ã€å‰å›ï¼ˆ${cycleNumber - 1}å›ç›®ï¼‰ã®æ”¹å–„æ¡ˆã¾ã¨ã‚ã€‘
${previousFeedbacks}

å‰å›ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¸ã¾ãˆã¦ã€æ”¹å–„ã•ã‚ŒãŸã‚¢ã‚¤ãƒ‡ã‚¢ã«ã¤ã„ã¦å†åº¦è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

1. Doï¼ˆå®Ÿè¡Œï¼‰: æ”¹å–„ã•ã‚ŒãŸã‚¢ã‚¤ãƒ‡ã‚¢ã§ã€ã‚ãªãŸã¯ä½•ã‚’è©¦ã—ã¾ã™ã‹ï¼Ÿ
2. Checkï¼ˆè©•ä¾¡ï¼‰: æ–°ãŸã«è¦‹ãˆã¦ããŸå•é¡Œã¯ï¼Ÿ
3. Actï¼ˆæ”¹å–„ï¼‰: ã•ã‚‰ãªã‚‹æ”¹å–„æ¡ˆã¯ï¼Ÿ

JSONå½¢å¼ã§å›ç­”ï¼š
{
  "do": "...",
  "check": "...",
  "act": "..."
}
`;
```

### 8.2 ä¸¦åˆ—å®Ÿè¡Œã®å®Ÿè£…
```typescript
// src/features/pdca-execution/engine/orchestrator.ts

export async function executeAllPersonas(
  personas: Persona[],
  idea: Idea,
  cycleNumber: number,
  previousFeedbacks?: string
): Promise<FeedbackData[]> {
  // 30äººã‚’ä¸¦åˆ—å®Ÿè¡Œï¼ˆPromise.allï¼‰
  const results = await Promise.all(
    personas.map(persona => 
      executeSinglePersona(persona, idea, cycleNumber, previousFeedbacks)
    )
  );
  
  return results;
}

async function executeSinglePersona(
  persona: Persona,
  idea: Idea,
  cycleNumber: number,
  previousFeedbacks?: string
): Promise<FeedbackData> {
  const prompt = buildPrompt(persona, idea, cycleNumber, previousFeedbacks);
  
  const response = await callClaudeAPI(prompt);
  
  // JSONãƒ‘ãƒ¼ã‚¹
  const feedback = JSON.parse(response);
  
  return {
    personaId: persona.id,
    doResponse: feedback.do,
    checkResponse: feedback.check,
    actResponse: feedback.act
  };
}
```

### 8.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
// Claude APIå‘¼ã³å‡ºã—å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤å‡¦ç†
async function callClaudeAPIWithRetry(
  prompt: string,
  maxRetries = 3
): Promise<string> {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await callClaudeAPI(prompt);
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await sleep(1000 * (i + 1)); // æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•
    }
  }
}
```

---

## 9. å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆæ‰€è¦æ™‚é–“: 1æ™‚é–“ï¼‰
1. âœ… Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. âœ… Prismaã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
3. âœ… PostgreSQLæ¥ç¶šç¢ºèª
4. âœ… 90äººã®ãƒšãƒ«ã‚½ãƒŠãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒ‰

### Phase 2: å…¥åŠ›ç”»é¢ï¼ˆæ‰€è¦æ™‚é–“: 30åˆ†ï¼‰
5. âœ… `/input`ãƒšãƒ¼ã‚¸ä½œæˆ
6. âœ… ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
7. âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 

### Phase 3: PDCAå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆæ‰€è¦æ™‚é–“: 2æ™‚é–“ï¼‰
8. âœ… Claude APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
9. âœ… `/api/pdca/execute`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
10. âœ… ä¸¦åˆ—å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
11. âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ 

### Phase 4: ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ï¼ˆæ‰€è¦æ™‚é–“: 1æ™‚é–“ï¼‰
12. âœ… `/api/ideas/[ideaId]`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
13. âœ… `/report/[ideaId]`ãƒšãƒ¼ã‚¸ä½œæˆ
14. âœ… ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
15. âœ… ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚«ãƒ¼ãƒ‰è¡¨ç¤º

### Phase 5: å®Ÿè¡Œä¸­ç”»é¢ï¼ˆæ‰€è¦æ™‚é–“: 30åˆ†ï¼‰
16. âœ… `/execute`ãƒšãƒ¼ã‚¸ä½œæˆ
17. âœ… é€²æ—ãƒãƒ¼ãƒªãƒ³ã‚°å®Ÿè£…

### Phase 6: ä»•ä¸Šã’ï¼ˆæ‰€è¦æ™‚é–“: 30åˆ†ï¼‰
18. âœ… UI/UXã®èª¿æ•´
19. âœ… ã‚¨ãƒ©ãƒ¼ç”»é¢ã®è¿½åŠ 
20. âœ… ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®æ”¹å–„

---

## 10. ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### 10.1 å‰ææ¡ä»¶
- Node.js 20.x ä»¥ä¸Š
- PostgreSQL 15.x ä»¥ä¸Š
- Anthropic API Key

### 10.2 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰
```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
npx create-next-app@latest market-mirror --typescript --tailwind --app
cd market-mirror

# 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install prisma @prisma/client @anthropic-ai/sdk
npm install -D @types/node

# 3. PrismaåˆæœŸåŒ–
npx prisma init

# 4. schema.prismaã‚’ç·¨é›†ï¼ˆä¸Šè¨˜ã‚¹ã‚­ãƒ¼ãƒã‚’ã‚³ãƒ”ãƒšï¼‰

# 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npx prisma migrate dev --name init

# 6. Prisma Clientç”Ÿæˆ
npx prisma generate

# 7. ãƒšãƒ«ã‚½ãƒŠãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒ‰
npx prisma db seed

# 8. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

### 10.3 .env.example
```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/market_mirror"

# Anthropic API
ANTHROPIC_API_KEY="sk-ant-..."
```

---

## 11. æŠ€è¡“çš„ãªæ³¨æ„äº‹é …

### 11.1 Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³åŒ–
```typescript
// src/lib/prisma.ts
import { PrismaClient } from '@prisma/client';

const globalForPrisma = global as unknown as { prisma: PrismaClient };

export const prisma =
  globalForPrisma.prisma ||
  new PrismaClient({
    log: ['query', 'error', 'warn'],
  });

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;
```

### 11.2 Claude APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–
- 30äººä¸¦åˆ—å®Ÿè¡Œæ™‚ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«æ³¨æ„
- å¿…è¦ã«å¿œã˜ã¦ãƒãƒƒãƒå‡¦ç†ï¼ˆ5äººãšã¤6ãƒãƒƒãƒç­‰ï¼‰
- ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã®å®Ÿè£…

### 11.3 ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
```typescript
// Next.js API Routeã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå»¶é•·
export const maxDuration = 300; // 5åˆ†ï¼ˆPDCAå®Ÿè¡Œç”¨ï¼‰
```

---

## 12. ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®è€ƒæ…®äº‹é …

### 12.1 æœ¬ç•ªç’°å¢ƒï¼ˆå°†æ¥ï¼‰
- **Hosting**: Vercel
- **Database**: Supabase (PostgreSQL)
- **Environment**: ç’°å¢ƒå¤‰æ•°ã‚’Vercelã«è¨­å®š

### 12.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- Claude APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆRedisç­‰ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªã®æœ€é©åŒ–ï¼ˆN+1å•é¡Œã®å›é¿ï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰åˆ†å‰²

---

## 13. ã¾ã¨ã‚

ã“ã®è¨­è¨ˆæ›¸ã«å¾“ãˆã°ã€ä»¥ä¸‹ãŒå®Ÿç¾ã§ãã¾ã™ï¼š

âœ… **ã‚·ãƒ³ãƒ—ãƒ«ãª3ç”»é¢æ§‹æˆ**ã§è¿·ã‚ãªã„  
âœ… **Feature-basedè¨­è¨ˆ**ã§AIãŒç†è§£ã—ã‚„ã™ã„  
âœ… **æ˜ç¢ºãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**ã§ãƒã‚°ãŒå°‘ãªã„  
âœ… **æ‹¡å¼µæ€§ã®é«˜ã„è¨­è¨ˆ**ã§å°†æ¥ã®æ©Ÿèƒ½è¿½åŠ ãŒå®¹æ˜“  

**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:
1. Cursorã§ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é–‹ã
2. Claude Codeã§ã€ŒPhase 1: åŸºç›¤æ§‹ç¯‰ã€ã‹ã‚‰é †ã«å®Ÿè£…
3. å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†å¾Œã€å‹•ä½œç¢ºèª

**æ¨å®šé–‹ç™ºæ™‚é–“**: 5-6æ™‚é–“  
**ç›®æ¨™**: 1æœˆ14æ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã§å®Œå‹•ã™ã‚‹ãƒ‡ãƒ¢

---

*ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å”¯ä¸€ã®çœŸå®Ÿã®æƒ…å ±æºï¼ˆSingle Source of Truthï¼‰ã§ã™ã€‚*  
*å®Ÿè£…ä¸­ã«ä»•æ§˜å¤‰æ›´ãŒã‚ã‚Œã°ã€å¿…ãšã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚*

