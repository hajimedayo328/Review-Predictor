# ストーリーボード（Story Board）

## 概要

Review Predictorのユーザー体験を画面遷移とともに示したストーリーボードです。

---

## 画面遷移図

```
┌─────────────────┐
│   トップページ   │
│   (/)           │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   入力画面      │
│   (/input)      │
│                 │
│ ・商品説明入力  │
│ ・シミュレーション│
│   実行ボタン    │
└────────┬────────┘
         │ POST /api/simulate
         ▼
┌─────────────────┐
│  ローディング    │
│  (処理中)       │
│                 │
│ 「シミュレーション│
│  実行中...」    │
└────────┬────────┘
         │ 約5秒
         ▼
┌─────────────────┐
│   結果画面      │
│ (/result/[id])  │
│                 │
│ ・評価分布グラフ │
│ ・セグメント分析 │
│ ・サンプルレビュー│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  新規シミュレーション │
│  または終了     │
└─────────────────┘
```

---

## ストーリーボード詳細

### Scene 1: トップページ

```
┌────────────────────────────────────────────────────┐
│  Review Predictor                                  │
│                                                    │
│  ┌──────────────────────────────────────────────┐  │
│  │                                              │  │
│  │     📊 Review Predictor                     │  │
│  │                                              │  │
│  │     新商品の説明文を入力するだけで、         │  │
│  │     10,000人の仮想顧客がどう評価するか      │  │
│  │     シミュレーションできます。              │  │
│  │                                              │  │
│  │     [ シミュレーションを始める ]            │  │
│  │                                              │  │
│  └──────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────┘
```

**ユーザーの行動:** 「シミュレーションを始める」ボタンをクリック

**システムの応答:** 入力画面へ遷移

---

### Scene 2: 入力画面

```
┌────────────────────────────────────────────────────┐
│  Review Predictor > 入力                           │
│                                                    │
│  ┌──────────────────────────────────────────────┐  │
│  │ 商品説明文を入力してください                 │  │
│  │                                              │  │
│  │ ┌──────────────────────────────────────────┐ │  │
│  │ │ この商品は、最高級の素材を使用した      │ │  │
│  │ │ ハンドメイドアクセサリーです。          │ │  │
│  │ │ 熟練の職人が一つ一つ丁寧に...          │ │  │
│  │ │                                          │ │  │
│  │ │                                          │ │  │
│  │ └──────────────────────────────────────────┘ │  │
│  │                                              │  │
│  │              [ シミュレーション実行 ]        │  │
│  │                                              │  │
│  └──────────────────────────────────────────────┘  │
│                                                    │
│  💡 ヒント: 具体的な特徴やメリットを記載すると   │
│     より正確な予測ができます                      │
└────────────────────────────────────────────────────┘
```

**ユーザーの行動:**
1. テキストエリアに商品説明文を入力
2. 「シミュレーション実行」ボタンをクリック

**システムの応答:**
1. 入力バリデーション（10文字以上）
2. POST /api/simulate にリクエスト送信
3. ローディング表示

---

### Scene 3: ローディング（処理中）

```
┌────────────────────────────────────────────────────┐
│  Review Predictor                                  │
│                                                    │
│  ┌──────────────────────────────────────────────┐  │
│  │                                              │  │
│  │                                              │  │
│  │              ⏳ シミュレーション実行中...    │  │
│  │                                              │  │
│  │              ████████░░░░░░░ 60%             │  │
│  │                                              │  │
│  │         10,000人の顧客データを分析中         │  │
│  │                                              │  │
│  │                                              │  │
│  └──────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────┘
```

**バックグラウンド処理:**
1. テキストをベクトル化（384次元）
2. pgvectorで10,000人の顧客と類似度計算
3. 各顧客の評価を予測
4. レビューテキストを生成
5. 結果をデータベースに保存

**所要時間:** 約5秒

---

### Scene 4: 結果画面

```
┌────────────────────────────────────────────────────┐
│  Review Predictor > 結果                           │
│                                                    │
│  ┌──────────────────────────────────────────────┐  │
│  │ シミュレーション結果                         │  │
│  │                                              │  │
│  │ 平均評価: ⭐ 3.8 / 5.0                       │  │
│  │ 購入意向率: 72%                              │  │
│  │                                              │  │
│  │ ┌─────────────────────────────────────────┐  │  │
│  │ │ 評価分布                                │  │  │
│  │ │ ⭐⭐⭐⭐⭐ ████████████ 25%             │  │  │
│  │ │ ⭐⭐⭐⭐   ██████████████████ 35%       │  │  │
│  │ │ ⭐⭐⭐     ████████ 20%                  │  │  │
│  │ │ ⭐⭐       ████ 12%                      │  │  │
│  │ │ ⭐         ███ 8%                        │  │  │
│  │ └─────────────────────────────────────────┘  │  │
│  │                                              │  │
│  │ セグメント別分析                             │  │
│  │ ┌─────────────────────────────────────────┐  │  │
│  │ │ Quality Focused   ⭐4.2  高評価傾向     │  │  │
│  │ │ Price Sensitive   ⭐3.1  価格懸念あり   │  │  │
│  │ │ Brand Loyal       ⭐3.9  好意的        │  │  │
│  │ │ Convenience       ⭐3.8  標準的        │  │  │
│  │ └─────────────────────────────────────────┘  │  │
│  │                                              │  │
│  │ サンプルレビュー                             │  │
│  │ ┌─────────────────────────────────────────┐  │  │
│  │ │ "品質が素晴らしい！長く使えそう" ⭐5    │  │  │
│  │ │ "値段の割には普通かな" ⭐3              │  │  │
│  │ │ "デザインが気に入りました" ⭐4          │  │  │
│  │ └─────────────────────────────────────────┘  │  │
│  │                                              │  │
│  │ [ 新しいシミュレーション ] [ 履歴を見る ]   │  │
│  └──────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────┘
```

**表示情報:**
1. 平均評価（1〜5）
2. 購入意向率（評価4以上の割合）
3. 評価分布グラフ（棒グラフ）
4. セグメント別の平均評価
5. サンプルレビュー（各評価から抜粋）

---

## ユーザーシナリオ

### シナリオ1: 初めての利用

```
田中美咲さん（ハンドメイド作家）

1. 新作アクセサリーの説明文を考える
2. Review Predictorにアクセス
3. 説明文を入力してシミュレーション実行
4. 結果を確認：平均評価 3.2
5. 「価格敏感層」の評価が低いことに気づく
6. 説明文に「コストパフォーマンス」を追加
7. 再度シミュレーション：平均評価 3.6 に改善
8. 改善した説明文でminneに出品
```

### シナリオ2: A/Bテスト

```
鈴木健太さん（D2Cマーケター）

1. 2パターンの説明文を用意
   - パターンA: 機能重視の説明
   - パターンB: ストーリー重視の説明
2. それぞれシミュレーション実行
3. 結果を比較
   - パターンA: 平均評価 3.5
   - パターンB: 平均評価 4.1
4. パターンBを採用してShopifyに掲載
```

---

## API仕様

### POST /api/simulate

**リクエスト:**
```json
{
  "description": "商品説明文..."
}
```

**レスポンス:**
```json
{
  "success": true,
  "simulationId": "sim_xxx",
  "summary": {
    "totalCustomers": 10000,
    "avgRating": 3.8,
    "conversionRate": 72
  }
}
```

### GET /api/results/[simulationId]

**レスポンス:**
```json
{
  "simulation": {...},
  "distribution": [
    {"rating": 5, "count": 2500},
    {"rating": 4, "count": 3500},
    ...
  ],
  "segments": [...],
  "sampleReviews": [...]
}
```

---

## 関連ドキュメント

- [モチベーショングラフ](MOTIVATION_GRAPH.md)
- [システムアーキテクチャ](SYSTEM_ARCHITECTURE.md)
- [データフロー](DATA_FLOW.md)
